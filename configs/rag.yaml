# configs/rag.yaml
chunking:
  strategy: heading_aware      # heading_aware | hierarchical
  max_chars: 1400              # 설정 필요
  overlap_chars: 150           # 설정 필요
  min_chars: 300               # 설정 필요

retrieval:
  use_vector: true
  use_bm25: true
  top_k_vector: 20             # 하이브리드 후보 풀 확보용(일반적으로 10~20개 수준으로 합쳐짐)
  top_k_bm25: 20               # 하이브리드 후보 풀 확보용(일반적으로 10~20개 수준으로 합쳐짐)
  hybrid_alpha: 0.5            # vector와 bm25를 섞을 때만 사용 (0~1)

rerank:
  enabled: true               # 리랭킹 단계는 필수 적용
  rerank_top_k: 15            # 하이브리드 후보(권장 10~20개)를 리랭킹 대상으로 사용
  final_top_n: 5              # 리랭커 점수 상위 3~5개를 LLM 컨텍스트에 전달(기본 5)

context:
  max_context_chars: 6000      # 설정 필요
  max_chunks_in_context: 5     # 최종 컨텍스트 청크 수(권장 3~5개)
  include_chunk_header: true   # doc/page/title_path를 컨텍스트에 붙일지

grounding:
  require_citations: true
  abstain_if_no_evidence: true
  min_cited_chunks: 1
